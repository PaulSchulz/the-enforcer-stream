
% This file needs to be called from either
%   luslatex lsa-calendar-2025.tex
%   lualatex lsa-calendar-2025-trims.tex

\makeatletter

\usepackage{fontspec}
\defaultfontfeatures{Ligatures={TeX}}
\setmainfont{TeX Gyre Pagella}
\newfontfamily\dejaVuSans{DejaVu Sans}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\setmonth}{January}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{January}

\SetPhoto[bleed=3mm, file={01-january}, thumbFile={01-january-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{February}

\SetPhoto[bleed=3mm, file={02-february}, thumbFile={02-february-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{March}

\SetPhoto[bleed=3mm, file={03-march}, thumbFile={03-march-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{April}

\SetPhoto[bleed=3mm, file={04-april}, thumbFile={04-april-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{May}

\SetPhoto[bleed=3mm, file={05-may}, thumbFile={05-may-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{June}

\SetPhoto[bleed=3mm, file={06-june}, thumbFile={06-june-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{July}

\SetPhoto[bleed=3mm, file={07-july}, thumbFile={07-july-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{August}

\SetPhoto[bleed=3mm, file={08-august},  thumbFile={08-august-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{September}

\SetPhoto[bleed=3mm, file={09-september}, thumbFile={09-september-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{October}

\SetPhoto[bleed=3mm, file={10-october}, thumbFile={10-october-thumbnail}]{\setmonth}

\SetQuote[%
  xOffset=0.5\linewidth - 0.5\paperwidth -3mm,
  yOffset=-160mm,
]{\setmonth}{%
\begin{tikzpicture}%
\node [
  fill=white, opacity=0.6, minimum width={\paperwidth + 3mm},
  minimum height=30mm] {};%
\node [] {%
\begin{minipage}{\paperwidth + 3mm}%
\centering
\Large
\color{black}
Volunteer members of the Leaf Spring Army\\
have supported Ukraine by donating vehicles.
\end{minipage}%
};
\end{tikzpicture}%
}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{November}

\SetPhoto[bleed=3mm, file={11-november}, thumbFile={11-november-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\setmonth}{December}

\SetPhoto[bleed=3mm, file={12-december}, thumbFile={12-december-thumbnail}]{\setmonth}

\SetQuote{\setmonth}

\ifshowframe
\SetCalendar[bg/.style={opacity=1, fill=white}]{\setmonth}
\else
\SetCalendar[bg/.style={opacity=1}]{\setmonth}
\fi

\SetEvents{\setmonth}{}
%if (equals=2018-06-21)
%[day text={\dejaVuSans\char"263C}];% U+263C white sun with rays
%}{%
%\raggedleft
%{\dejaVuSans\char"263C} June 21: Summer Solstice
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Use two CSV files for day text input to include the moon phases
\renewcommand\@wall@plm[1]{%
\luadirect{
require("wallcalendar-helpers.lua")
monthMarksDayText(\luastring{#1}, nil, \luastring{\plannerMarksDayTextCSV})
monthMarksDayText(\luastring{#1}, nil, \luastring{./data/moonphases-2025.csv})
tex.sprint(';')
}}

\newcommand\plannerYearFmt{\fontsize{26}{26}\selectfont\color{orangegold}}

\newlength\plannerNotesSep
\setlength{\plannerNotesSep}{3mm}

\newcommand\preYearPlannerPageHook{%
  \setlength{\markNumberAbove}{-9pt}%
  \setlength{\markNumberRight}{-6pt}%
  \setlength{\markDayTextAbove}{-11pt}%
  \setlength{\markDayTextRight}{-6pt}%
}

\newcommand\postYearPlannerPageHook{%
  \setlength{\markNumberAbove}{-10pt}%
  \setlength{\markNumberRight}{-3pt}%
  \setlength{\markDayTextAbove}{-10pt}%
  \setlength{\markDayTextRight}{-3pt}%
}

\newcommand\printPlannerTitle{\plannerYearFmt \CalendarYear}

\newcommand\YearPlannerPage{%
\newpage
\ifvarnishmask
\mbox{}
\else
\preYearPlannerPageHook
{\centering

{\printPlannerTitle}

\vspace*{7mm}

\YearPlannerPortrait

\vspace*{\plannerNotesSep}

\plannerEvents

}
\postYearPlannerPageHook

\fi
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Thumbnails
\newlength\@wall@tmp@a
\newlength\@wall@tmp@b

\newlength\@wall@thumbWidth
\newlength\@wall@thumbHeight
\newlength\@wall@thumbCaptionWidth
\setlength{\@wall@thumbWidth}{0.1749\calPaperWidth}% 30mm at the 6.75in page width, 0.1749 = 1/5.715
\setlength{\@wall@thumbHeight}{\@wall@thumbWidth}
\setlength{\@wall@thumbCaptionWidth}{0.2333\calPaperWidth}% 40mm at 6.75in page width

\newcommand\thumbFmt{}
\newcommand\thumbMonthFmt{\fontsize{10}{13}\selectfont\bfseries}
\newcommand\thumbCaptionFmt{\fontsize{10}{13}\selectfont}

\def\@wall@thumbFile{}
\def\@wall@photoCaption{}

\newcommand\ThumbWithCaptionLeftSide[1]{%
\pgfkeys{/Photo/#1/thumbFile/.get=\@wall@thumbFile}%
\ifx\@wall@thumbFile\empty
  \pgfkeys{/Photo/#1/file/.get=\@wall@thumbFile}%
\fi
\pgfkeys{/Photo/#1/caption/.get=\@wall@photoCaption}%
% Thumbnail caption
\ifvarnishmask%
\hspace*{\@wall@thumbWidth}
\else%
\begin{minipage}[b][\@wall@thumbHeight][t]{\@wall@thumbCaptionWidth}%
\raggedleft
\thumbFmt
{\thumbMonthFmt \@tr@monthNumName{\monthToNum{#1}}}\par
{\thumbCaptionFmt \@wall@photoCaption}%
\end{minipage}%
\fi%
\hspace*{3mm}
% Thumbnail photo
\begin{minipage}[b][\@wall@thumbHeight]{\@wall@thumbWidth}%
% FIXME placeholder
%\placeholder{%
\includegraphics[ keepaspectratio, height=\@wall@thumbHeight ]{\@wall@thumbFile}%
%}%
\end{minipage}%
}

\newcommand\ThumbWithCaptionRightSide[1]{%
\pgfkeys{/Photo/#1/thumbFile/.get=\@wall@thumbFile}%
\ifx\@wall@thumbFile\empty
  \pgfkeys{/Photo/#1/file/.get=\@wall@thumbFile}%
\fi
\pgfkeys{/Photo/#1/caption/.get=\@wall@photoCaption}%
% Thumbnail photo
\begin{minipage}[b][\@wall@thumbHeight]{\@wall@thumbWidth}%
% FIXME placeholder
%\placeholder{%
\includegraphics[ keepaspectratio, height=\@wall@thumbHeight ]{\@wall@thumbFile}%
%}%
\end{minipage}%
\hspace*{3mm}
% Thumbnail caption
\ifvarnishmask%
\hspace*{\@wall@thumbWidth}
\else%
\begin{minipage}[b][\@wall@thumbHeight][t]{\@wall@thumbCaptionWidth}%
\raggedright
\thumbFmt
{\thumbMonthFmt \@tr@monthNumName{\monthToNum{#1}}}\par
{\thumbCaptionFmt \@wall@photoCaption}%
\end{minipage}%
\fi%
}

\newlength{\thumbColumnWidth}
\newlength{\thumbColumnHeight}
\newlength{\thumbSep}
\newlength{\@t@a}
\newlength{\@t@b}

% vertical spacing
\setlength{\@t@a}{0.2\textheight}

% horizontal spacing
\setlength{\@t@b}{0.2\@wall@thumbCaptionWidth}% 8mm at 40mm caption width

\ifdimcomp{\@t@a}{<}{\@t@b}{
  \setlength{\thumbSep}{\@t@a}
}{
  \setlength{\thumbSep}{\@t@b}
}

\setlength{\thumbColumnWidth}{0.5\calPaperWidth - \thumbSep}
\setlength{\thumbColumnHeight}{\textheight}

\newcommand\ThumbsPage{%
\clearpage

\hspace*{-\@wall@leftMargin}%
\hspace*{-1pt}% small correction, space gets in somewhere
% Wrap
\begin{minipage}[t][\thumbColumnHeight]{\calPaperWidth}%
\centering%
\setlength{\parindent}{0pt}%
\setlength{\parskip}{0pt}%

% NOTE: multicols will not \vfill
% Left Column
\begin{minipage}[t][\thumbColumnHeight]{\thumbColumnWidth}%
\raggedleft

\ThumbWithCaptionLeftSide{January}

\vspace*{\thumbSep}

\ThumbWithCaptionLeftSide{March}

\vspace*{\thumbSep}

\ThumbWithCaptionLeftSide{May}

\vspace*{\thumbSep}

\ThumbWithCaptionLeftSide{July}

\vspace*{\thumbSep}

\ThumbWithCaptionLeftSide{September}

\vspace*{\thumbSep}

\ThumbWithCaptionLeftSide{November}

% End of left column
\end{minipage}%
%
\hspace*{\thumbSep}%
%
% Right column
\begin{minipage}[t][\thumbColumnHeight]{\thumbColumnWidth}%
\raggedright

\ThumbWithCaptionRightSide{February}

\vspace*{\thumbSep}

\ThumbWithCaptionRightSide{April}

\vspace*{\thumbSep}

\ThumbWithCaptionRightSide{June}

\vspace*{\thumbSep}

\ThumbWithCaptionRightSide{August}

\vspace*{\thumbSep}

\ThumbWithCaptionRightSide{October}

\vspace*{\thumbSep}

\ThumbWithCaptionRightSide{December}

% End of right column
\end{minipage}%

% End of wraps 
\end{minipage}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatother

%\newcommand{\publishingdate}{\today}
\newcommand{\publishingdate}{December 2024}
\newcommand{\publishingversion}{PDF Version}
%\newcommand{\publishingversion}{Printed Version}
\newcommand{\isbn}{123-45-67890-12-8} % Correct checksum required -8

\usepackage[ISBN=\isbn,SC0]{ean13isbn}
%\usepackage[ISBN=978-80-85955-35-4,SC0]{ean13isbn}
%\EANisbn[SC3]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

%% For soome rea
%\TitlePage{IMG_20241103_105015}{60mm}{%
%  \josefinSans\fontsize{30}{50}\selectfont
%  \CalendarYear\par
%  photo and notes calendar\par
%  with \LaTeX%
%}

\newpage

\vfill

\begin{center}

\includegraphics[width=120mm]{photos/lsa-eagle-black.png}

\vspace{10mm}

{\Huge The Leaf Spring Army}

\vspace{10mm}

{\HUGE \textbf{2025}}

\vspace{10mm}

{\Huge Calendar}


\end{center}

\vfill

\newpage

\textbf{Dedication}

This calendar is dedicated to all the people of Ukraine, as they
fight to repel the Russian invaders from their country.

\textbf{\textit{Slava Ukraini!}}

\vfill

\textbf{Disclaimer}

This calendar has been produced with as much care as possible, but errors can
occur. Before relying on any information from this publication, please confirm
with another source.

\vspace{5mm}

{\tiny
\textbf{About this calendar}

\vspace{3mm}

\begin{tabular}{l l}
Title:     & The Leaf Spring Army 2025 Calendar \\
Author:    & @Paul Schulz, for the Leaf Spring Army \\
Publisher: & The Enforcer Media Group \\
Version:   & \publishingversion, \publishingdate \\
ISBN:      & \isbn \\
\end{tabular}

\vspace{3mm}

2025 Edition

\vspace{3mm}

The calendar was typeset using Overleaf and the \LaTeX\ type-setting system,
using the ``wallcalendar'' layout.

\vspace{3mm}

Copyright \textcopyright The Enforcer Media Group, 2024

\vspace{3mm}

\begin{minipage}{\textwidth}
This publication is copyright. All images are used under license from LSA member
\textbf{@Duchie the cruton} and were taken while visiting Ukraine to deliver a
donated vehicle. The Leaf Spring Army Eagle was designed and supplied by
\textbf{@Nutters HD}.
\end{minipage}
}

\MonthPage[layout=full page, put photo=full page]{January}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{February}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{March}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{April}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{May}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{June}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{July}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{August}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{September}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{October}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{November}

\newpage

\

\MonthPage[layout=full page, put photo=full page]{December}

\newpage

\

\YearPlannerPage

\ThumbsPage

\end{document}
